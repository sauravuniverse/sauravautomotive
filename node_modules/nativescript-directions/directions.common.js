"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class DirectionsCommon {
    static getFromToQuerystring(options) {
        let dest = undefined, source = null, qs = "?saddr=";
        if (options.from) {
            if (options.from.address) {
                source = options.from.address;
            }
            else if (options.from.lat && options.from.lng) {
                source = options.from.lat + "," + options.from.lng;
            }
        }
        if (source) {
            qs += encodeURIComponent(source);
        }
        if (!options.to) {
            throw new Error("Set 'to', please.");
        }
        const toArray = options.to instanceof Array ? options.to : [options.to];
        for (let i = 0; i < toArray.length; i++) {
            const addressOptions = toArray[i];
            if (addressOptions.address) {
                dest = addressOptions.address;
            }
            else if (addressOptions.lat && addressOptions.lng) {
                dest = addressOptions.lat + "," + addressOptions.lng;
            }
            else {
                throw new Error("Either set 'address' or 'lat' and 'lng'.");
            }
            qs += (i === 0 ? "&daddr=" : "+to:") + encodeURIComponent(dest);
        }
        if (options.type) {
            qs += '&directionsmode=' + options.type;
            qs += '&dirflg=' + DirectionsCommon.getDirflgType(options.type);
        }
        console.log(">> qs: " + qs);
        return qs;
    }
    static getDirflgType(type) {
        if (type === "walking")
            return "w";
        else if (type === "bicycling")
            return "b";
        else if (type === "transit")
            return "r";
        else
            return "d";
    }
}
exports.DirectionsCommon = DirectionsCommon;
